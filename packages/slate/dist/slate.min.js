!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Slate={})}(this,(function(e){"use strict";var t=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n};var r=function(e){if(Array.isArray(e))return t(e)};var n=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var o=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}};var i=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var a=function(e){return r(e)||n(e)||o(e)||i()};var s=function(e){if(Array.isArray(e))return e};var u=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}};var c=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var f=function(e,t){return s(e)||u(e,t)||o(e,t)||c()};var l=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},h=new WeakMap,d=new WeakMap,v=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap;function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e.path;return Xe.levels(t);case"insert_node":var r=e.node,n=e.path,o=Xe.levels(n),i=ft.isText(r)?[]:Array.from(Ge.nodes(r),(function(e){var t=f(e,2)[1];return n.concat(t)}));return[].concat(a(o),a(i));case"merge_node":var s=e.path,u=Xe.ancestors(s),c=Xe.previous(s);return[].concat(a(u),[c]);case"move_node":var l=e.path,h=e.newPath;if(Xe.equals(l,h))return[];var d,v=[],p=[],g=w(Xe.ancestors(l));try{for(g.s();!(d=g.n()).done;){var y=d.value,m=Xe.transform(y,e);v.push(m)}}catch(e){g.e(e)}finally{g.f()}var b,x=w(Xe.ancestors(h));try{for(x.s();!(b=x.n()).done;){var O=b.value,P=Xe.transform(O,e);p.push(P)}}catch(e){x.e(e)}finally{x.f()}return[].concat(v,p);case"remove_node":var A=e.path,k=Xe.ancestors(A);return a(k);case"split_node":var j=e.path,E=Xe.levels(j),F=Xe.next(j);return[].concat(a(E),[F]);default:return[]}};var P=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o};var A=function(e,t){if(null==e)return{};var r,n,o=P(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(e,t){return e(t={exports:{}},t.exports),t.exports}var E=j((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new F(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===o)throw i;return D()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?v:h,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function g(){}function y(){}function m(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(S([])));x&&x!==r&&n.call(x,i)&&(b=x);var O=m.prototype=g.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function S(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:D}}function D(){return{value:t,done:!0}}return y.prototype=O.constructor=m,m.constructor=y,y.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},P(A.prototype),A.prototype[a]=function(){return this},e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(O),u(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));
/*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function F(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
var t}function S(e){var t,r;return!1!==F(e)&&("function"==typeof(t=e.constructor)&&(!1!==F(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}var D=j((function(e,t){!function(r){var n=t,o=e&&e.exports==n&&e,i="object"==typeof k&&k;i.global!==i&&i.window!==i||(r=i);var a=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,s=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,u=function(e){for(var t="",r=(e=e.replace(a,(function(e,t,r){return u(r)+t})).replace(s,"$2$1")).length;r--;)t+=e.charAt(r);return t},c={version:"0.2.0",reverse:u};if(n&&!n.nodeType)if(o)o.exports=c;else for(var f in c)c.hasOwnProperty(f)&&(n[f]=c[f]);else r.esrever=c}(k)})).reverse,N=/\s/,C=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,_=/['\u2018\u2019]/,B=function(e){for(var t=0,r=null,n=e.charCodeAt(0);n;)if(I(n)){var o=q(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(M(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!L(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},R=function(e){for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var i=B(t);t=e.slice(n,n+i);var a=e.slice(n+i);if(T(t,a))o=!0,r+=i;else{if(o)break;r+=i}n+=i}return r},T=function e(t,r){if(N.test(t))return!1;if(_.test(t)){var n=r.charAt(0),o=B(n);if(e(n=r.slice(0,o),r.slice(o)))return!0}return!C.test(t)},I=function(e){return 55296<=e&&e<=57343},q=function(e,t,r){if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},L=function(e){return e<=65039&&e>=65024},M=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e},z={isAncestor:function(e){return S(e)&&Ge.isNodeList(e.children)},isElement:function(e){return S(e)&&Ge.isNodeList(e.children)&&!J.isEditor(e)},isElementList:function(e){return Array.isArray(e)&&e.every((function(e){return z.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},matches:function(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.voids,n=void 0!==r&&r,o=t.mode,i=void 0===o?"lowest":o,a=t.at,s=void 0===a?e.selection:a,u=t.match;if(s){var c,l=J.path(e,s),h="lowest"===i,d=U(J.levels(e,{at:l,voids:n,match:u,reverse:h}));try{for(d.s();!(c=d.n()).done;){var v=f(c.value,2),p=v[0],g=v[1];if(!ft.isText(p)&&!Xe.equals(l,g))return[p,g]}}catch(e){d.e(e)}finally{d.f()}}},addMark:function(e,t,r){e.addMark(t,r)},after:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=J.point(e,t,{edge:"end"}),a=J.end(e,[]),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=U(J.positions(e,V(V({},o),{},{at:s})));try{for(l.s();!(n=l.n()).done;){var h=n.value;if(f>c)break;0!==f&&(r=h),f++}}catch(e){l.e(e)}finally{l.f()}return r},before:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=J.start(e,[]),a=J.point(e,t,{edge:"start"}),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=U(J.positions(e,V(V({},o),{},{at:s,reverse:!0})));try{for(l.s();!(n=l.n()).done;){var h=n.value;if(f>c)break;0!==f&&(r=h),f++}}catch(e){l.e(e)}finally{l.f()}return r},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteBackward(n)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteForward(n)},deleteFragment:function(e){e.deleteFragment()},edges:function(e,t){return[J.start(e,t),J.end(e,t)]},end:function(e,t){return J.point(e,t,{edge:"end"})},first:function(e,t){var r=J.path(e,t,{edge:"start"});return J.node(e,r)},fragment:function(e,t){var r=J.range(e,t),n=Ge.fragment(e,r);return n},hasBlocks:function(e,t){return t.children.some((function(t){return J.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return ft.isText(t)||J.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return ft.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return z.isElement(t)&&!e.isInline(t)},isEditor:function(e){return S(e)&&"function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||S(e.marks))&&(null===e.selection||ot.isRange(e.selection))&&Ge.isNodeList(e.children)&&Ze.isOperationList(e.operations)},isEnd:function(e,t,r){var n=J.end(e,r);return tt.equals(t,n)},isEdge:function(e,t,r){return J.isStart(e,t,r)||J.isEnd(e,t,r)},isEmpty:function(e,t){var r=t.children,n=f(r,1)[0];return 0===r.length||1===r.length&&ft.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:function(e,t){return z.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=v.get(e);return void 0===t||t},isStart:function(e,t,r){if(0!==t.offset)return!1;var n=J.start(e,r);return tt.equals(t,n)},isVoid:function(e,t){return z.isElement(t)&&e.isVoid(t)},last:function(e,t){var r=J.path(e,t,{edge:"end"});return J.node(e,r)},leaf:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=J.path(e,t,r),o=Ge.leaf(e,n);return[o,n]},levels:E.mark((function(e){var t,r,n,o,i,a,s,u,c,l,h,d,v,p,g,y=arguments;return E.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},r=t.at,n=void 0===r?e.selection:r,o=t.reverse,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,null==(u=t.match)&&(u=function(){return!0}),n){m.next=6;break}return m.abrupt("return");case 6:c=[],l=J.path(e,n),h=U(Ge.levels(e,l)),m.prev=9,h.s();case 11:if((d=h.n()).done){m.next=20;break}if(v=f(d.value,2),p=v[0],g=v[1],u(p,g)){m.next=15;break}return m.abrupt("continue",18);case 15:if(c.push([p,g]),s||!J.isVoid(e,p)){m.next=18;break}return m.abrupt("break",20);case 18:m.next=11;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(9),h.e(m.t0);case 25:return m.prev=25,h.f(),m.finish(25);case 28:return i&&c.reverse(),m.delegateYield(c,"t1",30);case 30:case"end":return m.stop()}}),c,null,[[9,22,25,28]])})),marks:function(e){var t=e.marks,r=e.selection;if(!r)return null;if(t)return t;if(ot.isExpanded(r)){var n=J.nodes(e,{match:ft.isText}),o=f(n,1)[0];if(o){var i=f(o,1)[0];i.text;return A(i,["text"])}return{}}var a=r.anchor,s=a.path,u=J.leaf(e,s),c=f(u,1)[0];if(0===a.offset){var l=J.previous(e,{at:s,match:ft.isText}),h=J.above(e,{match:function(t){return J.isBlock(e,t)}});if(l&&h){var d=f(l,2),v=d[0],p=d[1],g=f(h,2)[1];Xe.isAncestor(g,p)&&(c=v)}}var y=c;y.text;return A(y,["text"])},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=J.after(e,u,{voids:i});if(c){var l=J.last(e,[]),h=f(l,2),d=h[1],v=[c.path,d];if(Xe.isPath(u)&&0===u.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(Xe.isPath(u)){var p=J.parent(e,u),g=f(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=J.nodes(e,{at:v,match:a,mode:n,voids:i}),b=f(m,1),w=b[0];return w}}},node:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=J.path(e,t,r),o=Ge.get(e,n);return[o,n]},nodes:E.mark((function e(t){var r,n,o,i,a,s,u,c,l,h,d,v,p,g,y,m,b,w,x,O,P,A,k,j,F,S,D=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D.length>1&&void 0!==D[1]?D[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.mode,a=void 0===i?"all":i,s=r.universal,u=void 0!==s&&s,c=r.reverse,l=void 0!==c&&c,h=r.voids,d=void 0!==h&&h,(v=r.match)||(v=function(){return!0}),o){e.next=6;break}return e.abrupt("return");case 6:K.isSpan(o)?(p=o[0],g=o[1]):(y=J.path(t,o,{edge:"start"}),m=J.path(t,o,{edge:"end"}),p=l?m:y,g=l?y:m),b=Ge.nodes(t,{reverse:l,from:p,to:g,pass:function(e){var r=f(e,1)[0];return!d&&J.isVoid(t,r)}}),w=[],O=U(b),e.prev=10,O.s();case 12:if((P=O.n()).done){e.next=37;break}if(A=f(P.value,2),k=A[0],j=A[1],F=x&&0===Xe.compare(j,x[1]),"highest"!==a||!F){e.next=17;break}return e.abrupt("continue",35);case 17:if(v(k,j)){e.next=23;break}if(!u||F||!ft.isText(k)){e.next=22;break}return e.abrupt("return");case 22:return e.abrupt("continue",35);case 23:if("lowest"!==a||!F){e.next=26;break}return x=[k,j],e.abrupt("continue",35);case 26:if(!(S="lowest"===a?x:[k,j])){e.next=34;break}if(!u){e.next=32;break}w.push(S),e.next=34;break;case 32:return e.next=34,S;case 34:x=[k,j];case 35:e.next=12;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(10),O.e(e.t0);case 42:return e.prev=42,O.f(),e.finish(42);case 45:if("lowest"!==a||!x){e.next=52;break}if(!u){e.next=50;break}w.push(x),e.next=52;break;case 50:return e.next=52,x;case 52:if(!u){e.next=54;break}return e.delegateYield(w,"t1",54);case 54:case"end":return e.stop()}}),e,null,[[10,39,42,45]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,o=function(e){return h.get(e)||[]};if(J.isNormalizing(e)){if(n){var i=Array.from(Ge.nodes(e),(function(e){return f(e,2)[1]}));h.set(e,i)}0!==o(e).length&&J.withoutNormalizing(e,(function(){for(var t=42*o(e).length,r=0;0!==o(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var n=o(e).pop();if(Ge.has(e,n)){var i=J.node(e,n);e.normalizeNode(i)}r++}}))}},parent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=J.path(e,t,r),o=Xe.parent(n),i=J.node(e,o);return i},path:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.depth,o=r.edge;if(Xe.isPath(t))if("start"===o){var i=Ge.first(e,t),a=f(i,2),s=a[1];t=s}else if("end"===o){var u=Ge.last(e,t),c=f(u,2),l=c[1];t=l}return ot.isRange(t)&&(t="start"===o?ot.start(t):"end"===o?ot.end(t):Xe.common(t.anchor.path,t.focus.path)),tt.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},pathRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return J.pathRefs(e).delete(i),i.current=null,t}},a=J.pathRefs(e);return a.add(i),i},pathRefs:function(e){var t=p.get(e);return t||(t=new Set,p.set(e,t)),t},point:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.edge,o=void 0===n?"start":n;if(Xe.isPath(t)){var i;if("end"===o){var a=Ge.last(e,t),s=f(a,2),u=s[1];i=u}else{var c=Ge.first(e,t),l=f(c,2),h=l[1];i=h}var d=Ge.get(e,i);if(!ft.isText(d))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(t,"] because it has no ").concat(o," text node."));return{path:i,offset:"end"===o?d.text.length:0}}if(ot.isRange(t)){var v=ot.edges(t),p=f(v,2),g=p[0],y=p[1];return"start"===o?g:y}return t},pointRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return J.pointRefs(e).delete(i),i.current=null,t}},a=J.pointRefs(e);return a.add(i),i},pointRefs:function(e){var t=g.get(e);return t||(t=new Set,g.set(e,t)),t},positions:E.mark((function e(t){var r,n,o,i,a,s,u,c,l,h,d,v,p,g,y,m,b,w,x,O,P,A,k,j,F,S,N,C,_,T,I=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.unit,a=void 0===i?"offset":i,s=r.reverse,u=void 0!==s&&s,c=r.voids,l=void 0!==c&&c,o){e.next=4;break}return e.abrupt("return");case 4:h=J.range(t,o),d=ot.edges(h),v=f(d,2),p=v[0],g=v[1],y=u?g:p,m="",b=0,w=0,x=null,O=!1,P=function(){null==x&&(x="character"===a?B(m):"word"===a?R(m):"line"===a||"block"===a?m.length:1,m=m.slice(x)),w=u?w-x:w+x,x=(b-=x)>=0?null:0-b},A=U(J.nodes(t,{at:o,reverse:u,voids:l})),e.prev=14,A.s();case 16:if((k=A.n()).done){e.next=51;break}if(j=f(k.value,2),F=j[0],S=j[1],!z.isElement(F)){e.next=26;break}if(l||!t.isVoid(F)){e.next=23;break}return e.next=22,J.start(t,S);case 22:return e.abrupt("continue",49);case 23:if(!t.isInline(F)){e.next=25;break}return e.abrupt("continue",49);case 25:J.hasInlines(t,F)&&(N=Xe.isAncestor(S,g.path)?g:J.end(t,S),C=Xe.isAncestor(S,p.path)?p:J.start(t,S),_=J.string(t,{anchor:C,focus:N},{voids:l}),m=u?D(_):_,O=!0);case 26:if(!ft.isText(F)){e.next=49;break}if(T=Xe.equals(S,y.path),b=F.text.length,w=u?b:0,T&&(b=u?y.offset:b-y.offset,w=y.offset),!T&&!O&&"offset"!==a){e.next=34;break}return e.next=34,{path:S,offset:w};case 34:if(""!==m){e.next=39;break}return e.abrupt("break",48);case 39:P();case 40:if(!(b>=0)){e.next=45;break}return e.next=43,{path:S,offset:w};case 43:e.next=46;break;case 45:return e.abrupt("break",48);case 46:e.next=34;break;case 48:O=!1;case 49:e.next=16;break;case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(14),A.e(e.t0);case 56:return e.prev=56,A.f(),e.finish(56);case 59:case"end":return e.stop()}}),e,null,[[14,53,56,59]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=J.before(e,u,{voids:i});if(c){var l=J.first(e,[]),h=f(l,2),d=h[1],v=[c.path,d];if(Xe.isPath(u)&&0===u.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(Xe.isPath(u)){var p=J.parent(e,u),g=f(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=J.nodes(e,{reverse:!0,at:v,match:a,mode:n,voids:i}),b=f(m,1),w=b[0];return w}}},range:function(e,t,r){return ot.isRange(t)&&!r?t:{anchor:J.start(e,t),focus:J.end(e,r||t)}},rangeRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return J.rangeRefs(e).delete(i),i.current=null,t}},a=J.rangeRefs(e);return a.add(i),i},rangeRefs:function(e){var t=y.get(e);return t||(t=new Set,y.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},start:function(e,t){return J.point(e,t,{edge:"start"})},string:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.voids,i=void 0!==o&&o,a=J.range(e,t),s=ot.edges(a),u=f(s,2),c=u[0],l=u[1],h="",d=U(J.nodes(e,{at:a,match:ft.isText,voids:i}));try{for(d.s();!(r=d.n()).done;){var v=f(r.value,2),p=v[0],g=v[1],y=p.text;Xe.equals(g,l.path)&&(y=y.slice(0,l.offset)),Xe.equals(g,c.path)&&(y=y.slice(c.offset)),h+=y}}catch(e){d.e(e)}finally{d.f()}return h},unhangRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.voids,o=void 0!==n&&n,i=ot.edges(t),a=f(i,2),s=a[0],u=a[1];if(0!==s.offset||0!==u.offset||ot.isCollapsed(t))return t;var c,l=J.above(e,{at:u,match:function(t){return J.isBlock(e,t)}}),h=l?l[1]:[],d=J.start(e,[]),v={anchor:d,focus:u},p=!0,g=U(J.nodes(e,{at:v,match:ft.isText,reverse:!0,voids:o}));try{for(g.s();!(c=g.n()).done;){var y=f(c.value,2),m=y[0],b=y[1];if(p)p=!1;else if(""!==m.text||Xe.isBefore(b,h)){u={path:b,offset:m.text.length};break}}}catch(e){g.e(e)}finally{g.f()}return{anchor:s,focus:u}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return J.above(e,V(V({},t),{},{match:function(t){return J.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var r=J.isNormalizing(e);v.set(e,!1),t(),v.set(e,r),J.normalize(e)}},G={isLocation:function(e){return Xe.isPath(e)||tt.isPoint(e)||ot.isRange(e)}},K={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(Xe.isPath)}};function Y(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Z(e){return!!e&&!!e[Re]}function X(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[Be]||!!e.constructor[Be]||re(e)||ne(e))}function H(e,t,r){void 0===r&&(r=!1),0===Q(e)?(r?Object.keys:Te)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function Q(e){var t=e[Re];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:re(e)?2:ne(e)?3:0}function ee(e,t){return 2===Q(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function te(e,t,r){var n=Q(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function re(e){return De&&e instanceof Map}function ne(e){return Ne&&e instanceof Set}function oe(e){return e.o||e.t}function ie(e){if(Array.isArray(e))return e.slice();var t=Ie(e);delete t[Re];for(var r=Te(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function ae(e,t){ue(e)||Z(e)||!X(e)||(Q(e)>1&&(e.set=e.add=e.clear=e.delete=se),Object.freeze(e),t&&H(e,(function(e,t){return ae(t,!0)}),!0))}function se(){Y(2)}function ue(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function ce(e){var t=qe[e];return t||Y(19,e),t}function fe(){return Fe}function le(e,t){t&&(ce("Patches"),e.u=[],e.s=[],e.v=t)}function he(e){de(e),e.p.forEach(pe),e.p=null}function de(e){e===Fe&&(Fe=e.l)}function ve(e){return Fe={p:[],l:Fe,h:e,m:!0,_:0}}function pe(e){var t=e[Re];0===t.i||1===t.i?t.j():t.g=!0}function ge(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||ce("ES5").S(t,e,n),n?(r[Re].P&&(he(t),Y(4)),X(e)&&(e=ye(t,e),t.l||be(t,e)),t.u&&ce("Patches").M(r[Re],e,t.u,t.s)):e=ye(t,r,[]),he(t),t.u&&t.v(t.u,t.s),e!==_e?e:void 0}function ye(e,t,r){if(ue(t))return t;var n=t[Re];if(!n)return H(t,(function(o,i){return me(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return be(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=ie(n.k):n.o;H(3===n.i?new Set(o):o,(function(t,i){return me(e,n,o,t,i,r)})),be(e,o,!1),r&&e.u&&ce("Patches").R(n,r,e.u,e.s)}return n.o}function me(e,t,r,n,o,i){if(Z(o)){var a=ye(e,o,i&&t&&3!==t.i&&!ee(t.D,n)?i.concat(n):void 0);if(te(r,n,a),!Z(a))return;e.m=!1}if(X(o)&&!ue(o)){if(!e.h.N&&e._<1)return;ye(e,o),t&&t.A.l||be(e,o)}}function be(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&ae(t,r)}function we(e,t){var r=e[Re];return(r?oe(r):e)[t]}function xe(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Oe(e){e.P||(e.P=!0,e.l&&Oe(e.l))}function Pe(e){e.o||(e.o=ie(e.t))}function Ae(e,t,r){var n=re(t)?ce("MapSet").T(t,r):ne(t)?ce("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:fe(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=Le;r&&(o=[n],i=Me);var a=Proxy.revocable(o,i),s=a.revoke,u=a.proxy;return n.k=u,n.j=s,u}(t,r):ce("ES5").J(t,r);return(r?r.A:fe()).p.push(n),n}function ke(e){return Z(e)||Y(22,e),function e(t){if(!X(t))return t;var r,n=t[Re],o=Q(t);if(n){if(!n.P&&(n.i<4||!ce("ES5").K(n)))return n.t;n.I=!0,r=je(t,o),n.I=!1}else r=je(t,o);return H(r,(function(t,o){n&&function(e,t){return 2===Q(e)?e.get(t):e[t]}(n.t,t)===o||te(r,t,e(o))})),3===o?new Set(r):r}(e)}function je(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ie(e)}var Ee,Fe,Se="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),De="undefined"!=typeof Map,Ne="undefined"!=typeof Set,Ce="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_e=Se?Symbol.for("immer-nothing"):((Ee={})["immer-nothing"]=!0,Ee),Be=Se?Symbol.for("immer-draftable"):"__$immer_draftable",Re=Se?Symbol.for("immer-state"):"__$immer_state",Te="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ie=Object.getOwnPropertyDescriptors||function(e){var t={};return Te(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},qe={},Le={get:function(e,t){if(t===Re)return e;var r=oe(e);if(!ee(r,t))return function(e,t,r){var n,o=xe(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!X(n)?n:n===we(e.t,t)?(Pe(e),e.o[t]=Ae(e.A.h,n,e)):n},has:function(e,t){return t in oe(e)},ownKeys:function(e){return Reflect.ownKeys(oe(e))},set:function(e,t,r){var n=xe(oe(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(e.D[t]=!0,!e.P){if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,we(oe(e),t))&&(void 0!==r||ee(e.t,t)))return!0;Pe(e),Oe(e)}return e.o[t]=r,!0},deleteProperty:function(e,t){return void 0!==we(e.t,t)||t in e.t?(e.D[t]=!1,Pe(e),Oe(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=oe(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){Y(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Y(12)}},Me={};H(Le,(function(e,t){Me[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Me.deleteProperty=function(e,t){return Le.deleteProperty.call(this,e[0],t)},Me.set=function(e,t,r){return Le.set.call(this,e[0],t,r,e[0])};var ze=new(function(){function e(e){this.O=Ce,this.N=!1,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var o=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(a))}))}}var i;if("function"!=typeof t&&Y(6),void 0!==r&&"function"!=typeof r&&Y(7),X(e)){var a=ve(this),s=Ae(this,e,void 0),u=!0;try{i=t(s),u=!1}finally{u?he(a):de(a)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return le(a,r),ge(e,a)}),(function(e){throw he(a),e})):(le(a,r),ge(i,a))}if(!e||"object"!=typeof e){if((i=t(e))===_e)return;return void 0===i&&(i=e),this.N&&ae(i,!0),i}Y(21,e)},t.produceWithPatches=function(e,t){var r,n,o=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){X(e)||Y(8),Z(e)&&(e=ke(e));var t=ve(this),r=Ae(this,e,void 0);return r[Re].C=!0,de(t),r},t.finishDraft=function(e,t){var r=(e&&e[Re]).A;return le(r,t),ge(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!Ce&&Y(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var o=ce("Patches").$;return Z(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),We=ze.produce,Ve=(ze.produceWithPatches.bind(ze),ze.setAutoFreeze.bind(ze),ze.setUseProxies.bind(ze),ze.applyPatches.bind(ze),ze.createDraft.bind(ze)),Ue=ze.finishDraft.bind(ze);function $e(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ge={ancestor:function(e,t){var r=Ge.get(e,t);if(ft.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},ancestors:E.mark((function e(t,r){var n,o,i,a,s,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>2&&void 0!==c[2]?c[2]:{},o=$e(Xe.ancestors(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return a=i.value,s=Ge.ancestor(t,a),u=[s,a],e.next=10,u;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(ft.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},children:E.mark((function(e,t){var r,n,o,i,a,s,u,c,f=arguments;return E.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},n=r.reverse,o=void 0!==n&&n,i=Ge.ancestor(e,t),a=i.children,s=o?a.length-1:0;case 5:if(!(o?s>=0:s<a.length)){l.next=13;break}return u=Ge.child(i,s),c=t.concat(s),l.next=10,[u,c];case 10:s=o?s-1:s+1,l.next=5;break;case 13:case"end":return l.stop()}}),a)})),common:function(e,t,r){var n=Xe.common(t,r);return[Ge.get(e,n),n]},descendant:function(e,t){var r=Ge.get(e,t);if(J.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},descendants:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=$e(Ge.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=f(o.value,2),a=i[0],0===(s=i[1]).length){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=$e(Ge.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=f(o.value,2),a=i[0],s=i[1],!z.isElement(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){if(z.isAncestor(e)){e.children;return A(e,["children"])}e.text;return A(e,["text"])},first:function(e,t){for(var r=t.slice(),n=Ge.get(e,r);n&&!ft.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment:function(e,t){if(ft.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return We({children:e.children},(function(e){var r,n=ot.edges(t),o=f(n,2),i=o[0],a=o[1],s=$e(Ge.nodes(e,{reverse:!0,pass:function(e){var r=f(e,2)[1];return!ot.includes(t,r)}}));try{for(s.s();!(r=s.n()).done;){var u=f(r.value,2)[1];if(!ot.includes(t,u)){var c=Ge.parent(e,u),l=u[u.length-1];c.children.splice(l,1)}if(Xe.equals(u,a.path)){var h=Ge.leaf(e,u);h.text=h.text.slice(0,a.offset)}if(Xe.equals(u,i.path)){var d=Ge.leaf(e,u);d.text=d.text.slice(i.offset)}}}catch(e){s.e(e)}finally{s.f()}J.isEditor(e)&&delete e.selection})).children},get:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(ft.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(ft.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:function(e){return ft.isText(e)||z.isElement(e)||J.isEditor(e)},isNodeList:function(e){return Array.isArray(e)&&e.every((function(e){return Ge.isNode(e)}))},last:function(e,t){for(var r=t.slice(),n=Ge.get(e,r);n&&!ft.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf:function(e,t){var r=Ge.get(e,t);if(!ft.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},levels:E.mark((function e(t,r){var n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>2&&void 0!==u[2]?u[2]:{},o=$e(Xe.levels(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=11;break}return a=i.value,s=Ge.get(t,a),e.next=9,[s,a];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return z.isElement(e)&&z.isElementProps(t)&&z.matches(e,t)||ft.isText(e)&&ft.isTextProps(t)&&ft.matches(e,t)},nodes:E.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,h,d,v,p=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=p.length>1&&void 0!==p[1]?p[1]:{},n=r.pass,o=r.reverse,i=void 0!==o&&o,a=r.from,s=void 0===a?[]:a,u=r.to,c=new Set,f=[],l=t;case 6:if(!u||!(i?Xe.isBefore(f,u):Xe.isAfter(f,u))){e.next=9;break}return e.abrupt("break",37);case 9:if(c.has(l)){e.next=12;break}return e.next=12,[l,f];case 12:if(c.has(l)||ft.isText(l)||0===l.children.length||null!=n&&!1!==n([l,f])){e.next=19;break}return c.add(l),h=i?l.children.length-1:0,Xe.isAncestor(f,s)&&(h=s[f.length]),f=f.concat(h),l=Ge.get(t,f),e.abrupt("continue",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt("break",37);case 21:if(i){e.next=27;break}if(d=Xe.next(f),!Ge.has(t,d)){e.next=27;break}return f=d,l=Ge.get(t,f),e.abrupt("continue",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return v=Xe.previous(f),f=v,l=Ge.get(t,f),e.abrupt("continue",6);case 32:f=Xe.parent(f),l=Ge.get(t,f),c.add(l),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var r=Xe.parent(t),n=Ge.get(e,r);if(ft.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:function(e){return ft.isText(e)?e.text:e.children.map(Ge.string).join("")},texts:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=$e(Ge.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=f(o.value,2),a=i[0],s=i[1],!ft.isText(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze={isNodeOperation:function(e){return Ze.isOperation(e)&&e.type.endsWith("_node")},isOperation:function(e){if(!S(e))return!1;switch(e.type){case"insert_node":return Xe.isPath(e.path)&&Ge.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Xe.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Xe.isPath(e.path)&&S(e.properties);case"move_node":return Xe.isPath(e.path)&&Xe.isPath(e.newPath);case"remove_node":return Xe.isPath(e.path)&&Ge.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Xe.isPath(e.path);case"set_node":return Xe.isPath(e.path)&&S(e.properties)&&S(e.newProperties);case"set_selection":return null===e.properties&&ot.isRange(e.newProperties)||null===e.newProperties&&ot.isRange(e.properties)||S(e.properties)&&S(e.newProperties);case"split_node":return Xe.isPath(e.path)&&"number"==typeof e.position&&S(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&e.every((function(e){return Ze.isOperation(e)}))},isSelectionOperation:function(e){return Ze.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation:function(e){return Ze.isOperation(e)&&e.type.endsWith("_text")},inverse:function(e){switch(e.type){case"insert_node":return Ye(Ye({},e),{},{type:"remove_node"});case"insert_text":return Ye(Ye({},e),{},{type:"remove_text"});case"merge_node":return Ye(Ye({},e),{},{type:"split_node",path:Xe.previous(e.path)});case"move_node":var t=e.newPath,r=e.path;if(Xe.equals(t,r))return e;if(Xe.isSibling(r,t))return Ye(Ye({},e),{},{path:t,newPath:r});var n=Xe.transform(r,e),o=Xe.transform(Xe.next(r),e);return Ye(Ye({},e),{},{path:n,newPath:o});case"remove_node":return Ye(Ye({},e),{},{type:"insert_node"});case"remove_text":return Ye(Ye({},e),{},{type:"insert_text"});case"set_node":var i=e.properties,a=e.newProperties;return Ye(Ye({},e),{},{properties:a,newProperties:i});case"set_selection":var s=e.properties,u=e.newProperties;return Ye(Ye({},e),{},null==s?{properties:u,newProperties:null}:null==u?{properties:null,newProperties:s}:{properties:u,newProperties:s});case"split_node":return Ye(Ye({},e),{},{type:"merge_node",path:Xe.next(e.path)})}}},Xe={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=Xe.levels(e,t);return o=n?o.slice(1):o.slice(0,-1)},common:function(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return Xe.equals(n,o)&&i>a},endsAt:function(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return Xe.equals(n,o)},endsBefore:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return Xe.equals(n,o)&&i<a},equals:function(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===Xe.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===Xe.compare(e,t)},isBefore:function(e,t){return-1===Xe.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===Xe.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===Xe.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===Xe.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===Xe.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&Xe.equals(r,n)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=[],i=0;i<=e.length;i++)o.push(e.slice(0,i));return n&&o.reverse(),o},next:function(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!Xe.isAncestor(t,e)&&!Xe.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return We(e,(function(n){var o=r.affinity,i=void 0===o?"forward":o;if(0!==e.length)switch(t.type){case"insert_node":var a=t.path;(Xe.equals(a,n)||Xe.endsBefore(a,n)||Xe.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var s=t.path;if(Xe.equals(s,n)||Xe.isAncestor(s,n))return null;Xe.endsBefore(s,n)&&(n[s.length-1]-=1);break;case"merge_node":var u=t.path,c=t.position;Xe.equals(u,n)||Xe.endsBefore(u,n)?n[u.length-1]-=1:Xe.isAncestor(u,n)&&(n[u.length-1]-=1,n[u.length]+=c);break;case"split_node":var f=t.path,l=t.position;if(Xe.equals(f,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else Xe.endsBefore(f,n)?n[f.length-1]+=1:Xe.isAncestor(f,n)&&e[f.length]>=l&&(n[f.length-1]+=1,n[f.length]-=l);break;case"move_node":var h=t.path,d=t.newPath;if(Xe.equals(h,d))return;if(Xe.isAncestor(h,n)||Xe.equals(h,n)){var v=d.slice();return Xe.endsBefore(h,d)&&h.length<d.length&&(v[h.length-1]-=1),v.concat(n.slice(h.length))}Xe.isSibling(h,d)&&(Xe.isAncestor(d,n)||Xe.equals(d,n))?Xe.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:Xe.endsBefore(d,n)||Xe.equals(d,n)||Xe.isAncestor(d,n)?(Xe.endsBefore(h,n)&&(n[h.length-1]-=1),n[d.length-1]+=1):Xe.endsBefore(h,n)&&(Xe.equals(d,n)&&(n[d.length-1]+=1),n[h.length-1]-=1)}}))}},He={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=Xe.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var tt={compare:function(e,t){var r=Xe.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:function(e,t){return 1===tt.compare(e,t)},isBefore:function(e,t){return-1===tt.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&Xe.equals(e.path,t.path)},isPoint:function(e){return S(e)&&"number"==typeof e.offset&&Xe.isPath(e.path)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return We(e,(function(e){var n=r.affinity,o=void 0===n?"forward":n,i=e.path,a=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=Xe.transform(i,t,r);break;case"insert_text":Xe.equals(t.path,i)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":Xe.equals(t.path,i)&&(e.offset+=t.position),e.path=Xe.transform(i,t,r);break;case"remove_text":Xe.equals(t.path,i)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(Xe.equals(t.path,i)||Xe.isAncestor(t.path,i))return null;e.path=Xe.transform(i,t,r);break;case"split_node":if(Xe.equals(t.path,i)){if(t.position===a&&null==o)return null;(t.position<a||t.position===a&&"forward"===o)&&(e.offset-=t.position,e.path=Xe.transform(i,t,et(et({},r),{},{affinity:"forward"})))}else e.path=Xe.transform(i,t,r)}}))}},rt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=tt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ot={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=e.anchor,i=e.focus;return ot.isBackward(e)===n?[o,i]:[i,o]},end:function(e){var t=ot.edges(e),r=f(t,2)[1];return r},equals:function(e,t){return tt.equals(e.anchor,t.anchor)&&tt.equals(e.focus,t.focus)},includes:function(e,t){if(ot.isRange(t)){if(ot.includes(e,t.anchor)||ot.includes(e,t.focus))return!0;var r=ot.edges(e),n=f(r,2),o=n[0],i=n[1],a=ot.edges(t),s=f(a,2),u=s[0],c=s[1];return tt.isBefore(o,u)&&tt.isAfter(i,c)}var l=ot.edges(e),h=f(l,2),d=h[0],v=h[1],p=!1,g=!1;return tt.isPoint(t)?(p=tt.compare(t,d)>=0,g=tt.compare(t,v)<=0):(p=Xe.compare(t,d.path)>=0,g=Xe.compare(t,v.path)<=0),p&&g},intersection:function(e,t){e.anchor,e.focus;var r=A(e,["anchor","focus"]),n=ot.edges(e),o=f(n,2),i=o[0],a=o[1],s=ot.edges(t),u=f(s,2),c=u[0],h=u[1],d=tt.isBefore(i,c)?c:i,v=tt.isBefore(a,h)?a:h;return tt.isBefore(v,d)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:d,focus:v},r)},isBackward:function(e){var t=e.anchor,r=e.focus;return tt.isAfter(t,r)},isCollapsed:function(e){var t=e.anchor,r=e.focus;return tt.equals(t,r)},isExpanded:function(e){return!ot.isCollapsed(e)},isForward:function(e){return!ot.isBackward(e)},isRange:function(e){return S(e)&&tt.isPoint(e.anchor)&&tt.isPoint(e.focus)},points:E.mark((function e(t){return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=ot.edges(e),r=f(t,1)[0];return r},transform:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.affinity,a=void 0===i?"inward":i;return"inward"===a?ot.isForward(e)?(r="forward",n="backward"):(r="backward",n="forward"):"outward"===a?ot.isForward(e)?(r="backward",n="forward"):(r="forward",n="backward"):(r=a,n=a),We(e,(function(e){var o=tt.transform(e.anchor,t,{affinity:r}),i=tt.transform(e.focus,t,{affinity:n});if(!o||!i)return null;e.anchor=o,e.focus=i}))}},it={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=ot.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function at(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ft={equals:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.loose,o=void 0!==n&&n;for(var i in e)if((!o||"text"!==i)&&e[i]!==t[i])return!1;for(var a in t)if((!o||"text"!==a)&&e[a]!==t[a])return!1;return!0},isText:function(e){return S(e)&&"string"==typeof e.text},isTextList:function(e){return Array.isArray(e)&&e.every((function(e){return ft.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations:function(e,t){var r,n=[ct({},e)],o=at(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value,s=(a.anchor,a.focus,A(a,["anchor","focus"])),u=ot.edges(a),c=f(u,2),l=c[0],h=c[1],d=[],v=0,p=at(n);try{for(p.s();!(i=p.n()).done;){var g=i.value,y=g.text.length,m=v;if(v+=y,l.offset<=m&&h.offset>=m+y)Object.assign(g,s),d.push(g);else if(l.offset>m+y||h.offset<m||h.offset===m&&0!==m)d.push(g);else{var b=g,w=void 0,x=void 0;if(h.offset<m+y){var O=h.offset-m;x=ct(ct({},b),{},{text:b.text.slice(O)}),b=ct(ct({},b),{},{text:b.text.slice(0,O)})}if(l.offset>m){var P=l.offset-m;w=ct(ct({},b),{},{text:b.text.slice(0,P)}),b=ct(ct({},b),{},{text:b.text.slice(P)})}Object.assign(b,s),w&&d.push(w),d.push(b),x&&d.push(x)}}}catch(e){p.e(e)}finally{p.f()}n=d}}catch(e){o.e(e)}finally{o.f()}return n}};function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bt={insertNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.mode,u=void 0===s?"lowest":s,c=r.at,l=r.match,h=r.select;if(Ge.isNode(t)&&(t=[t]),0!==t.length){var d=f(t,1)[0];if(c||(c=e.selection?e.selection:e.children.length>0?J.end(e,[]):[0],h=!0),null==h&&(h=!1),ot.isRange(c))if(o||(c=J.unhangRange(e,c)),ot.isCollapsed(c))c=c.anchor;else{var v=ot.edges(c),p=f(v,2)[1],g=J.pointRef(e,p);Dt.delete(e,{at:c}),c=g.unref()}if(tt.isPoint(c)){null==l&&(l=ft.isText(d)?function(e){return ft.isText(e)}:e.isInline(d)?function(t){return ft.isText(t)||J.isInline(e,t)}:function(t){return J.isBlock(e,t)});var y=J.nodes(e,{at:c.path,match:l,mode:u,voids:a}),m=f(y,1)[0];if(!m)return;var b=f(m,2)[1],w=J.pathRef(e,b),x=J.isEnd(e,c,b);Dt.splitNodes(e,{at:c,match:l,mode:u,voids:a});var O=w.unref();c=x?Xe.next(O):O}var P=Xe.parent(c),A=c[c.length-1];if(a||!J.void(e,{at:P})){var k,j=yt(t);try{for(j.s();!(k=j.n()).done;){var E=k.value,F=P.concat(A);A++,e.apply({type:"insert_node",path:F,node:E})}}catch(e){j.e(e)}finally{j.f()}if(h){var S=J.end(e,c);S&&Dt.select(e,S)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.at,n=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,a=t.voids,s=void 0!==a&&a,u=t.match;if(null==u&&(u=Xe.isPath(n)?xt(e,n):function(t){return J.isBlock(e,t)}),n)for(var c=J.nodes(e,{at:n,match:u,mode:i,voids:s}),l=0,h=Array.from(c,(function(t){var r=f(t,2)[1];return J.pathRef(e,r)}));l<h.length;l++){var d=h[l].unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var v=J.node(e,Xe.parent(d)),p=f(v,2),g=p[0],y=p[1],m=d[d.length-1],b=g.children.length;if(1===b){var w=Xe.next(y);Dt.moveNodes(e,{at:d,to:w,voids:s}),Dt.removeNodes(e,{at:y,voids:s})}else if(0===m)Dt.moveNodes(e,{at:d,to:y,voids:s});else if(m===b-1){var x=Xe.next(y);Dt.moveNodes(e,{at:d,to:x,voids:s})}else{var O=Xe.next(d),P=Xe.next(y);Dt.splitNodes(e,{at:O,voids:s}),Dt.moveNodes(e,{at:d,to:P,voids:s})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.match,n=t.at,o=void 0===n?e.selection:n,i=t.hanging,a=void 0!==i&&i,s=t.voids,u=void 0!==s&&s,c=t.mode,l=void 0===c?"lowest":c;if(o){if(null==r)if(Xe.isPath(o)){var h=J.parent(e,o),d=f(h,1)[0];r=function(e){return d.children.includes(e)}}else r=function(t){return J.isBlock(e,t)};if(!a&&ot.isRange(o)&&(o=J.unhangRange(e,o)),ot.isRange(o))if(ot.isCollapsed(o))o=o.anchor;else{var v=ot.edges(o),p=f(v,2)[1],g=J.pointRef(e,p);Dt.delete(e,{at:o}),o=g.unref(),null==t.at&&Dt.select(e,o)}var y=J.nodes(e,{at:o,match:r,voids:u,mode:l}),m=f(y,1)[0],b=J.previous(e,{at:o,match:r,voids:u,mode:l});if(m&&b){var w=f(m,2),x=w[0],O=w[1],P=f(b,2),k=P[0],j=P[1];if(0!==O.length&&0!==j.length){var E,F,S=Xe.next(j),D=Xe.common(O,j),N=Xe.isSibling(O,j),C=Array.from(J.levels(e,{at:O}),(function(e){return f(e,1)[0]})).slice(D.length).slice(0,-1),_=J.above(e,{at:O,mode:"highest",match:function(e){return C.includes(e)&&z.isElement(e)&&1===e.children.length}}),B=_&&J.pathRef(e,_[1]);if(ft.isText(x)&&ft.isText(k)){x.text;var R=A(x,["text"]);F=k.text.length,E=R}else{if(!z.isElement(x)||!z.isElement(k))throw new Error("Cannot merge the node at path [".concat(O,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(x)," ").concat(JSON.stringify(k)));x.children;var T=A(x,["children"]);F=k.children.length,E=T}N||Dt.moveNodes(e,{at:O,to:S,voids:u}),B&&Dt.removeNodes(e,{at:B.current,voids:u}),z.isElement(k)&&J.isEmpty(e,k)||ft.isText(k)&&""===k.text?Dt.removeNodes(e,{at:j,voids:u}):e.apply({type:"merge_node",path:S,position:F,properties:E}),B&&B.unref()}}}}))},moveNodes:function(e,t){J.withoutNormalizing(e,(function(){var r=t.to,n=t.at,o=void 0===n?e.selection:n,i=t.mode,a=void 0===i?"lowest":i,s=t.voids,u=void 0!==s&&s,c=t.match;if(o){null==c&&(c=Xe.isPath(o)?xt(e,o):function(t){return J.isBlock(e,t)});for(var l=J.pathRef(e,r),h=J.nodes(e,{at:o,match:c,mode:a,voids:u}),d=0,v=Array.from(h,(function(t){var r=f(t,2)[1];return J.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref(),g=l.current;0!==p.length&&e.apply({type:"move_node",path:p,newPath:g})}l.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.hanging,n=void 0!==r&&r,o=t.voids,i=void 0!==o&&o,a=t.mode,s=void 0===a?"lowest":a,u=t.at,c=void 0===u?e.selection:u,l=t.match;if(c){null==l&&(l=Xe.isPath(c)?xt(e,c):function(t){return J.isBlock(e,t)}),!n&&ot.isRange(c)&&(c=J.unhangRange(e,c));for(var h=J.nodes(e,{at:c,match:l,mode:s,voids:i}),d=0,v=Array.from(h,(function(t){var r=f(t,2)[1];return J.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref();if(p){var g=J.node(e,p),y=f(g,1)[0];e.apply({type:"remove_node",path:p,node:y})}}}}))},setNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J.withoutNormalizing(e,(function(){var n=r.match,o=r.at,i=void 0===o?e.selection:o,a=r.hanging,s=void 0!==a&&a,u=r.mode,c=void 0===u?"lowest":u,l=r.split,h=void 0!==l&&l,d=r.voids,v=void 0!==d&&d;if(i){if(null==n&&(n=Xe.isPath(i)?xt(e,i):function(t){return J.isBlock(e,t)}),!s&&ot.isRange(i)&&(i=J.unhangRange(e,i)),h&&ot.isRange(i)){var p=J.rangeRef(e,i,{affinity:"inward"}),g=ot.edges(i),y=f(g,2),m=y[0],b=y[1],w="lowest"===c?"lowest":"highest";Dt.splitNodes(e,{at:b,match:n,mode:w,voids:v}),Dt.splitNodes(e,{at:m,match:n,mode:w,voids:v}),i=p.unref(),null==r.at&&Dt.select(e,i)}var x,O=yt(J.nodes(e,{at:i,match:n,mode:c,voids:v}));try{for(O.s();!(x=O.n()).done;){var P=f(x.value,2),A=P[0],k=P[1],j={},E={};if(0!==k.length){for(var F in t)"children"!==F&&"text"!==F&&t[F]!==A[F]&&(j[F]=A[F],E[F]=t[F]);0!==Object.keys(E).length&&e.apply({type:"set_node",path:k,properties:j,newProperties:E})}}}catch(e){O.e(e)}finally{O.f()}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s,c=t.height,l=void 0===c?0:c,h=t.always,d=void 0!==h&&h;if(null==a&&(a=function(t){return J.isBlock(e,t)}),ot.isRange(u)&&(u=wt(e,u)),Xe.isPath(u)){var v=u,p=J.point(e,v),g=J.parent(e,v),y=f(g,1)[0];a=function(e){return e===y},l=p.path.length-v.length+1,u=p,d=!0}if(u){var m=J.pointRef(e,u,{affinity:"backward"}),b=J.nodes(e,{at:u,match:a,mode:n,voids:i}),w=f(b,1)[0];if(w){var x=J.void(e,{at:u,mode:"highest"});if(!i&&x){var O=f(x,2),P=O[0],A=O[1];if(z.isElement(P)&&e.isInline(P)){var k=J.after(e,A);if(!k){var j=Xe.next(A);Dt.insertNodes(e,{text:""},{at:j,voids:i}),k=J.point(e,j)}u=k,d=!0}l=u.path.length-A.length+1,d=!0}var E,F=J.pointRef(e,u),S=u.path.length-l,D=f(w,2)[1],N=u.path.slice(0,S),C=0===l?u.offset:u.path[S]+0,_=yt(J.levels(e,{at:N,reverse:!0,voids:i}));try{for(_.s();!(E=_.n()).done;){var B=f(E.value,2),R=B[0],T=B[1],I=!1;if(T.length<D.length||0===T.length||!i&&J.isVoid(e,R))break;var q=m.current,L=J.isEnd(e,q,T);if(d||!m||!J.isEdge(e,q,T)){I=!0;var M=Ge.extractProps(R);e.apply({type:"split_node",path:T,position:C,properties:M})}C=T[T.length-1]+(I||L?1:0)}}catch(e){_.e(e)}finally{_.f()}if(null==t.at){var W=F.current||J.end(e,[]);Dt.select(e,W)}m.unref(),F.unref()}}}))},unsetNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n,o={},i=yt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o[a]=null}}catch(e){i.e(e)}finally{i.f()}Dt.setNodes(e,o,r)},unwrapNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,u=t.at,c=void 0===u?e.selection:u,l=t.match;if(c){null==l&&(l=Xe.isPath(c)?xt(e,c):function(t){return J.isBlock(e,t)}),Xe.isPath(c)&&(c=J.range(e,c));for(var h=ot.isRange(c)?J.rangeRef(e,c):null,d=J.nodes(e,{at:c,match:l,mode:n,voids:s}),v=Array.from(d,(function(t){var r=f(t,2)[1];return J.pathRef(e,r)})),p=function(){var t=y[g].unref(),r=J.node(e,t),n=f(r,1)[0],o=J.range(e,t);i&&h&&(o=ot.intersection(h.current,o)),Dt.liftNodes(e,{at:o,match:function(e){return z.isAncestor(n)&&n.children.includes(e)},voids:s})},g=0,y=v;g<y.length;g++)p();h&&h.unref()}}))},wrapNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J.withoutNormalizing(e,(function(){var n=r.mode,o=void 0===n?"lowest":n,i=r.split,a=void 0!==i&&i,s=r.voids,u=void 0!==s&&s,c=r.match,l=r.at,h=void 0===l?e.selection:l;if(h){if(null==c&&(c=Xe.isPath(h)?xt(e,h):e.isInline(t)?function(t){return J.isInline(e,t)||ft.isText(t)}:function(t){return J.isBlock(e,t)}),a&&ot.isRange(h)){var d=ot.edges(h),v=f(d,2),p=v[0],g=v[1],y=J.rangeRef(e,h,{affinity:"inward"});Dt.splitNodes(e,{at:g,match:c,voids:u}),Dt.splitNodes(e,{at:p,match:c,voids:u}),h=y.unref(),null==r.at&&Dt.select(e,h)}for(var m=0,b=Array.from(J.nodes(e,{at:h,match:e.isInline(t)?function(t){return J.isBlock(e,t)}:function(e){return J.isEditor(e)},mode:"lowest",voids:u}));m<b.length;m++){var w=f(b[m],2)[1],x=ot.isRange(h)?ot.intersection(h,J.range(e,w)):h;if(x){var O=Array.from(J.nodes(e,{at:x,match:c,mode:o,voids:u}));O.length>0&&function(){var r=f(O,1)[0],n=O[O.length-1],o=f(r,2)[1],i=f(n,2)[1],a=Xe.equals(o,i)?Xe.parent(o):Xe.common(o,i),s=J.range(e,o,i),c=J.node(e,a),l=f(c,1)[0],h=a.length+1,d=Xe.next(i.slice(0,h)),v=gt(gt({},t),{},{children:[]});Dt.insertNodes(e,v,{at:d,voids:u}),Dt.moveNodes(e,{at:s,match:function(e){return z.isAncestor(l)&&l.children.includes(e)},to:d.concat(0),voids:u})}()}}}}))}},wt=function(e,t){if(ot.isCollapsed(t))return t.anchor;var r=ot.edges(t),n=f(r,2)[1],o=J.pointRef(e,n);return Dt.delete(e,{at:t}),o.unref()},xt=function(e,t){var r=J.node(e,t),n=f(r,1)[0];return function(e){return e===n}};function Ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var At={collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.edge,n=void 0===r?"anchor":r,o=e.selection;if(o)if("anchor"===n)Dt.select(e,o.anchor);else if("focus"===n)Dt.select(e,o.focus);else if("start"===n){var i=ot.edges(o),a=f(i,1),s=a[0];Dt.select(e,s)}else if("end"===n){var u=ot.edges(o),c=f(u,2),l=c[1];Dt.select(e,l)}},deselect:function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.selection,n=t.distance,o=void 0===n?1:n,i=t.unit,a=void 0===i?"character":i,s=t.reverse,u=void 0!==s&&s,c=t.edge,f=void 0===c?null:c;if(r){"start"===f&&(f=ot.isBackward(r)?"focus":"anchor"),"end"===f&&(f=ot.isBackward(r)?"anchor":"focus");var l=r.anchor,h=r.focus,d={distance:o,unit:a},v={};if(null==f||"anchor"===f){var p=u?J.before(e,l,d):J.after(e,l,d);p&&(v.anchor=p)}if(null==f||"focus"===f){var g=u?J.before(e,h,d):J.after(e,h,d);g&&(v.focus=g)}Dt.setSelection(e,v)}},select:function(e,t){var r=e.selection;if(t=J.range(e,t),r)Dt.setSelection(e,t);else{if(!ot.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.selection,o=r.edge,i=void 0===o?"both":o;if(n){"start"===i&&(i=ot.isBackward(n)?"focus":"anchor"),"end"===i&&(i=ot.isBackward(n)?"anchor":"focus");var a=n.anchor,s=n.focus,u="anchor"===i?a:s;Dt.setSelection(e,l({},"anchor"===i?"anchor":"focus",Pt(Pt({},u),t)))}},setSelection:function(e,t){var r=e.selection,n={},o={};if(r){for(var i in t)("anchor"===i&&null!=t.anchor&&!tt.equals(t.anchor,r.anchor)||"focus"===i&&null!=t.focus&&!tt.equals(t.focus,r.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==r[i])&&(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}};function kt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Et={delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.withoutNormalizing(e,(function(){var r=t.reverse,n=void 0!==r&&r,o=t.unit,i=void 0===o?"character":o,a=t.distance,s=void 0===a?1:a,u=t.voids,c=void 0!==u&&u,l=t.at,h=void 0===l?e.selection:l,d=t.hanging,v=void 0!==d&&d;if(h){if(ot.isRange(h)&&ot.isCollapsed(h)&&(h=h.anchor),tt.isPoint(h)){var p=J.void(e,{at:h,mode:"highest"});if(!c&&p){h=f(p,2)[1]}else{var g={unit:i,distance:s};h={anchor:h,focus:n?J.before(e,h,g)||J.start(e,[]):J.after(e,h,g)||J.end(e,[])},v=!0}}if(Xe.isPath(h))Dt.removeNodes(e,{at:h,voids:c});else if(!ot.isCollapsed(h)){v||(h=J.unhangRange(e,h,{voids:c}));var y=ot.edges(h),m=f(y,2),b=m[0],w=m[1],x=J.above(e,{match:function(t){return J.isBlock(e,t)},at:b,voids:c}),O=J.above(e,{match:function(t){return J.isBlock(e,t)},at:w,voids:c}),P=x&&O&&!Xe.equals(x[1],O[1]),A=Xe.equals(b.path,w.path),k=c?null:J.void(e,{at:b,mode:"highest"}),j=c?null:J.void(e,{at:w,mode:"highest"});if(k){var E=J.before(e,b);E&&x&&Xe.isAncestor(x[1],E.path)&&(b=E)}if(j){var F=J.after(e,w);F&&O&&Xe.isAncestor(O[1],F.path)&&(w=F)}var S,D,N=[],C=kt(J.nodes(e,{at:h,voids:c}));try{for(C.s();!(D=C.n()).done;){var _=D.value,B=f(_,2),R=B[0],T=B[1];S&&0===Xe.compare(T,S)||(!c&&J.isVoid(e,R)||!Xe.isCommon(T,b.path)&&!Xe.isCommon(T,w.path))&&(N.push(_),S=T)}}catch(e){C.e(e)}finally{C.f()}var I=Array.from(N,(function(t){var r=f(t,2)[1];return J.pathRef(e,r)})),q=J.pointRef(e,b),L=J.pointRef(e,w);if(!A&&!k){var M=q.current,z=J.leaf(e,M),W=f(z,1)[0],V=M.path,U=b.offset,$=W.text.slice(U);e.apply({type:"remove_text",path:V,offset:U,text:$})}for(var G=0,K=I;G<K.length;G++){var Y=K[G].unref();Dt.removeNodes(e,{at:Y,voids:c})}if(!j){var Z=L.current,X=J.leaf(e,Z),H=f(X,1)[0],Q=Z.path,ee=A?b.offset:0,te=H.text.slice(ee,w.offset);e.apply({type:"remove_text",path:Q,offset:ee,text:te})}!A&&P&&L.current&&q.current&&Dt.mergeNodes(e,{at:L.current,hanging:!0,voids:c});var re=L.unref()||q.unref();null==t.at&&re&&Dt.select(e,re)}}}))},insertFragment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.at,u=void 0===s?e.selection:s;if(t.length&&u){if(ot.isRange(u))if(o||(u=J.unhangRange(e,u)),ot.isCollapsed(u))u=u.anchor;else{var c=ot.edges(u),l=f(c,2)[1];if(!a&&J.void(e,{at:l}))return;var h=J.pointRef(e,l);Dt.delete(e,{at:u}),u=h.unref()}else Xe.isPath(u)&&(u=J.start(e,u));if(a||!J.void(e,{at:u})){var d=J.above(e,{at:u,match:function(t){return J.isInline(e,t)},mode:"highest",voids:a});if(d){var v=f(d,2)[1];if(J.isEnd(e,u,v))u=J.after(e,v);else if(J.isStart(e,u,v)){u=J.before(e,v)}}var p,g=J.above(e,{match:function(t){return J.isBlock(e,t)},at:u,voids:a}),y=f(g,2)[1],m=J.isStart(e,u,y),b=J.isEnd(e,u,y),w=!m||m&&b,x=!b,O=Ge.first({children:t},[]),P=f(O,2)[1],A=Ge.last({children:t},[]),k=f(A,2)[1],j=[],E=function(t){var r=f(t,2),n=r[0],o=r[1];return!(w&&Xe.isAncestor(o,P)&&z.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(x&&Xe.isAncestor(o,k)&&z.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))},F=kt(Ge.nodes({children:t},{pass:E}));try{for(F.s();!(p=F.n()).done;){var S=p.value;S[1].length>0&&E(S)&&j.push(S)}}catch(e){F.e(e)}finally{F.f()}for(var D=[],N=[],C=[],_=!0,B=!1,R=0,T=j;R<T.length;R++){var I=f(T[R],1)[0];z.isElement(I)&&!e.isInline(I)?(_=!1,B=!0,N.push(I)):_?D.push(I):C.push(I)}var q=J.nodes(e,{at:u,match:function(t){return ft.isText(t)||J.isInline(e,t)},mode:"highest",voids:a}),L=f(q,1)[0],M=f(L,2)[1],W=J.isStart(e,u,M),V=J.isEnd(e,u,M),U=J.pathRef(e,b?Xe.next(y):y),$=J.pathRef(e,V?Xe.next(M):M);Dt.splitNodes(e,{at:u,match:function(t){return B?J.isBlock(e,t):ft.isText(t)||J.isInline(e,t)},mode:B?"lowest":"highest",voids:a});var G=J.pathRef(e,!W||W&&V?Xe.next(M):M);if(Dt.insertNodes(e,D,{at:G.current,match:function(t){return ft.isText(t)||J.isInline(e,t)},mode:"highest",voids:a}),Dt.insertNodes(e,N,{at:U.current,match:function(t){return J.isBlock(e,t)},mode:"lowest",voids:a}),Dt.insertNodes(e,C,{at:$.current,match:function(t){return ft.isText(t)||J.isInline(e,t)},mode:"highest",voids:a}),!r.at){var K;K=C.length>0?Xe.previous($.current):N.length>0?Xe.previous(U.current):Xe.previous(G.current);var Y=J.end(e,K);Dt.select(e,Y)}G.unref(),U.unref(),$.unref()}}}))},insertText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};J.withoutNormalizing(e,(function(){var n=r.voids,o=void 0!==n&&n,i=r.at,a=void 0===i?e.selection:i;if(a){if(Xe.isPath(a)&&(a=J.range(e,a)),ot.isRange(a))if(ot.isCollapsed(a))a=a.anchor;else{var s=ot.end(a);if(!o&&J.void(e,{at:s}))return;var u=J.pointRef(e,s);Dt.delete(e,{at:a,voids:o}),a=u.unref(),Dt.setSelection(e,{anchor:a,focus:a})}if(o||!J.void(e,{at:a})){var c=a,f=c.path,l=c.offset;e.apply({type:"insert_text",path:f,offset:l,text:t})}}}))}};function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dt=St(St(St(St({},{transform:function(e,t){e.children=Ve(e.children);var r=e.selection&&Ve(e.selection);switch(t.type){case"insert_node":var n=t.path,o=t.node,i=Ge.parent(e,n),s=n[n.length-1];if(i.children.splice(s,0,o),r){var u,c=dt(ot.points(r));try{for(c.s();!(u=c.n()).done;){var l=f(u.value,2),h=l[0];r[l[1]]=tt.transform(h,t)}}catch(e){c.e(e)}finally{c.f()}}break;case"insert_text":var d=t.path,v=t.offset,p=t.text,g=Ge.leaf(e,d),y=g.text.slice(0,v),m=g.text.slice(v);if(g.text=y+p+m,r){var b,w=dt(ot.points(r));try{for(w.s();!(b=w.n()).done;){var x=f(b.value,2),O=x[0];r[x[1]]=tt.transform(O,t)}}catch(e){w.e(e)}finally{w.f()}}break;case"merge_node":var P=t.path,A=Ge.get(e,P),k=Xe.previous(P),j=Ge.get(e,k),E=Ge.parent(e,P),F=P[P.length-1];if(ft.isText(A)&&ft.isText(j))j.text+=A.text;else{if(ft.isText(A)||ft.isText(j))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(P,"] to nodes of different interaces: ").concat(A," ").concat(j));var S;(S=j.children).push.apply(S,a(A.children))}if(E.children.splice(F,1),r){var D,N=dt(ot.points(r));try{for(N.s();!(D=N.n()).done;){var C=f(D.value,2),_=C[0];r[C[1]]=tt.transform(_,t)}}catch(e){N.e(e)}finally{N.f()}}break;case"move_node":var B=t.path,R=t.newPath;if(Xe.isAncestor(B,R))throw new Error("Cannot move a path [".concat(B,"] to new path [").concat(R,"] because the destination is inside itself."));var T=Ge.get(e,B),I=Ge.parent(e,B),q=B[B.length-1];I.children.splice(q,1);var L=Xe.transform(B,t),M=Ge.get(e,Xe.parent(L)),z=L[L.length-1];if(M.children.splice(z,0,T),r){var W,V=dt(ot.points(r));try{for(V.s();!(W=V.n()).done;){var U=f(W.value,2),$=U[0];r[U[1]]=tt.transform($,t)}}catch(e){V.e(e)}finally{V.f()}}break;case"remove_node":var J=t.path,G=J[J.length-1];if(Ge.parent(e,J).children.splice(G,1),r){var K,Y=dt(ot.points(r));try{for(Y.s();!(K=Y.n()).done;){var X=f(K.value,2),H=X[0],Q=X[1],ee=tt.transform(H,t);if(null!=r&&null!=ee)r[Q]=ee;else{var te,re=void 0,ne=void 0,oe=dt(Ge.texts(e));try{for(oe.s();!(te=oe.n()).done;){var ie=f(te.value,2),ae=ie[0],se=ie[1];if(-1!==Xe.compare(se,J)){ne=[ae,se];break}re=[ae,se]}}catch(e){oe.e(e)}finally{oe.f()}re?(H.path=re[1],H.offset=re[0].text.length):ne?(H.path=ne[1],H.offset=0):r=null}}}catch(e){Y.e(e)}finally{Y.f()}}break;case"remove_text":var ue=t.path,ce=t.offset,fe=t.text,le=Ge.leaf(e,ue),he=le.text.slice(0,ce),de=le.text.slice(ce+fe.length);if(le.text=he+de,r){var ve,pe=dt(ot.points(r));try{for(pe.s();!(ve=pe.n()).done;){var ge=f(ve.value,2),ye=ge[0];r[ge[1]]=tt.transform(ye,t)}}catch(e){pe.e(e)}finally{pe.f()}}break;case"set_node":var me=t.path,be=t.newProperties;if(0===me.length)throw new Error("Cannot set properties on the root node!");var we=Ge.get(e,me);for(var xe in be){if("children"===xe||"text"===xe)throw new Error('Cannot set the "'.concat(xe,'" property of nodes!'));var Oe=be[xe];null==Oe?delete we[xe]:we[xe]=Oe}break;case"set_selection":var Pe=t.newProperties;if(null==Pe)r=Pe;else if(null==r){if(!ot.isRange(Pe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Pe)," when there is no current selection."));r=Pe}else Object.assign(r,Pe);break;case"split_node":var Ae=t.path,ke=t.position,je=t.properties;if(0===Ae.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ae,"] because the root node cannot be split."));var Ee,Fe=Ge.get(e,Ae),Se=Ge.parent(e,Ae),De=Ae[Ae.length-1];if(ft.isText(Fe)){var Ne=Fe.text.slice(0,ke),Ce=Fe.text.slice(ke);Fe.text=Ne,Ee=ht(ht({},je),{},{text:Ce})}else{var _e=Fe.children.slice(0,ke),Be=Fe.children.slice(ke);Fe.children=_e,Ee=ht(ht({},je),{},{children:Be})}if(Se.children.splice(De+1,0,Ee),r){var Re,Te=dt(ot.points(r));try{for(Te.s();!(Re=Te.n()).done;){var Ie=f(Re.value,2),qe=Ie[0];r[Ie[1]]=tt.transform(qe,t)}}catch(e){Te.e(e)}finally{Te.f()}}}e.children=Ue(e.children),e.selection=r?Z(r)?Ue(r):r:null}}),bt),At),Et);e.Editor=J,e.Element=z,e.Location=G,e.Node=Ge,e.Operation=Ze,e.Path=Xe,e.PathRef=He,e.Point=tt,e.PointRef=rt,e.Range=ot,e.RangeRef=it,e.Span=K,e.Text=ft,e.Transforms=Dt,e.createEditor=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var r,n=w(J.pathRefs(e));try{for(n.s();!(r=n.n()).done;){var o=r.value;He.transform(o,t)}}catch(e){n.e(e)}finally{n.f()}var i,a=w(J.pointRefs(e));try{for(a.s();!(i=a.n()).done;){var s=i.value;rt.transform(s,t)}}catch(e){a.e(e)}finally{a.f()}var u,c=w(J.rangeRefs(e));try{for(c.s();!(u=c.n()).done;){var f=u.value;it.transform(f,t)}}catch(e){c.e(e)}finally{c.f()}var l,v=new Set,p=[],g=function(e){if(e){var t=e.join(",");v.has(t)||(v.add(t),p.push(e))}},y=h.get(e)||[],m=O(t),b=w(y);try{for(b.s();!(l=b.n()).done;){var x=l.value;g(Xe.transform(x,t))}}catch(e){b.e(e)}finally{b.f()}var P,A=w(m);try{for(A.s();!(P=A.n()).done;){g(P.value)}}catch(e){A.e(e)}finally{A.f()}h.set(e,p),Dt.transform(e,t),e.operations.push(t),J.normalize(e),"set_selection"===t.type&&(e.marks=null),d.get(e)||(d.set(e,!0),Promise.resolve().then((function(){d.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,r){var n=e.selection;if(n)if(ot.isExpanded(n))Dt.setNodes(e,l({},t,r),{match:ft.isText,split:!0});else{var o=b(b({},J.marks(e)||{}),{},l({},t,r));e.marks=o,e.onChange()}},deleteBackward:function(t){var r=e.selection;r&&ot.isCollapsed(r)&&Dt.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var r=e.selection;r&&ot.isCollapsed(r)&&Dt.delete(e,{unit:t})},deleteFragment:function(){var t=e.selection;t&&ot.isExpanded(t)&&Dt.delete(e)},getFragment:function(){var t=e.selection;return t?Ge.fragment(e,t):[]},insertBreak:function(){Dt.splitNodes(e,{always:!0})},insertFragment:function(t){Dt.insertFragment(e,t)},insertNode:function(t){Dt.insertNodes(e,t)},insertText:function(t){var r=e.selection,n=e.marks;if(r){if(ot.isCollapsed(r)){var o=J.above(e,{match:function(t){return J.isInline(e,t)},mode:"highest"});if(o){var i=f(o,2)[1];if(J.isEnd(e,r.anchor,i)){var a=J.after(e,i);Dt.setSelection(e,{anchor:a,focus:a})}}}if(n){var s=b({text:t},n);Dt.insertNodes(e,s)}else Dt.insertText(e,t);e.marks=null}},normalizeNode:function(t){var r=f(t,2),n=r[0],o=r[1];if(!ft.isText(n))if(z.isElement(n)&&0===n.children.length){Dt.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}else for(var i=!J.isEditor(n)&&(z.isElement(n)&&(e.isInline(n)||0===n.children.length||ft.isText(n.children[0])||e.isInline(n.children[0]))),a=0,s=0;s<n.children.length;s++,a++){var u=n.children[s],c=n.children[s-1],l=s===n.children.length-1;if((ft.isText(u)||z.isElement(u)&&e.isInline(u))!==i)Dt.removeNodes(e,{at:o.concat(a),voids:!0}),a--;else if(z.isElement(u)){if(e.isInline(u))if(null!=c&&ft.isText(c)){if(l){Dt.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{Dt.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else null!=c&&ft.isText(c)&&(ft.equals(u,c,{loose:!0})?(Dt.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===c.text?(Dt.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):l&&""===u.text&&(Dt.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}},removeMark:function(t){var r=e.selection;if(r)if(ot.isExpanded(r))Dt.unsetNodes(e,t,{match:ft.isText,split:!0});else{var n=b({},J.marks(e)||{});delete n[t],e.marks=n,e.onChange()}}};return e},Object.defineProperty(e,"__esModule",{value:!0})}));
